{% extends "pay/base_index.html" %}

{% block opening_content %}
<div class="row mt-4">
  <form role="form" id="pagosweb" method="post" action="" enctype="multipart/form-data">
    <input type="hidden" name="empresaCode" id="empresaCode" value="{{ empresa }}">
    <div class="row">
      <!-- Columna izquierda -->
      <div class="col-sm-5">
        <div class="card shadow-lg mt-3">
          <div class="card-header bg-light">
            <h4 class="mb-0 text-dark"><i class="fa fa-money"></i> Elige Monto</h4>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <div class="row">
                <div class="col-5">
                  <strong><i class="fa fa-plane"></i> Valor Viaje:</strong>
                </div>
                <div class="col-7">
                  <input type="text" class="form-control text-end" name="valorv" id="valorv"
                    value="{{ form_view.valorv }}" readonly>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <div class="row">
                <div class="col-5">
                  <strong><i class="fa fa-exclamation-circle"></i> Saldo Pendiente:</strong>
                </div>
                <div class="col-7">
                  <input type="text" class="form-control text-end" id="saldopen" name="saldopen"
                    value="{{ form_view.saldopen }}" readonly>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <div class="row">
                <div class="col-5">
                  <strong><i class="fa fa-check-circle"></i> Pago Total:</strong>
                </div>
                <div class="col-7">
                  <input type="text" class="form-control text-end" id="apagar" name="apagar"
                    value="{{ form_view.apagar }}" readonly>
                  <input type="hidden" id="sfapagar" name="sfapagar" value="{{ form_view.sfapagar }}">
                </div>
              </div>
            </div>

            <div class="mb-4">
              <div class="row">
                <div class="col-5">
                  <strong><i class="fa fa-edit"></i> Otro Valor:</strong>
                </div>
                <div class="col-7">
                  <input type="text" class="form-control text-end" id="mpagar" name="mpagar"
                    onkeypress="return FunctioonlyNum(event)" maxlength="10" autofocus autocomplete="off" value="0">
                </div>
              </div>
            </div>

            <hr>

            <div class="d-flex justify-content-between flex-wrap gap-2">
              <button type="button" class="btn btn-primary btn-lg show-compact-entry" id="{{ session['id'] }}">
                <i class="fa fa-list"></i> Ver Abonos
              </button>
              <a href="/{{ empresa }}/manager/payment" class="btn btn-secondary btn-lg">
                <i class="fa fa-angle-double-left"></i> Cancelar y Volver
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-2"></div>

      <!-- Columna derecha -->
      <div class="col-sm-5">
        <div class="card shadow-lg mt-3">
          <div class="card-header bg-light">
            <h4 class="mb-0 text-dark"><i class="fa fa-credit-card"></i> Elige Forma Pago</h4>
          </div>
          <div class="card-body">
            <div class="row">
              <!-- agregar formas de pago segun gateways --->
              {% for gtw in form_view.gatewaysc %}
              {% if gtw.existe == 'S' %}
              <div class="col-sm-6 mb-3">
                <button type="submit" class="btn btn-primary btn-sm w-100" id="{{ gtw['gateway_type'] }}"
                  style="border: none; padding: 0; background: none;">
                  <img src="{{ gtw['image'] }}" class="img-fluid" style="max-width: 100%; height: auto;" alt="Pagos">
                </button>
              </div>
              {% endif %}
              {% endfor %}
              <!---- fin formas de pago --->
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<!-- Modal -->
<div class="modal fade" id="modal-compact-view" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <div class="modal-header">
        <h4 class="modal-title">Detalle de Pagos</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>

      <div class="modal-body"></div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/pay/formpayment.js"></script>
{% endblock %}