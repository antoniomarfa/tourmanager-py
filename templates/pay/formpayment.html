{% extends "opening/base_index.html" %}

{% block opening_content %}
<div class="row mt-4">
  <form role="form" id="pagosweb" method="post" action="/{{ empresa }}/manager/pay/inicioTransaccion" enctype="multipart/form-data">   
    <!-- Columna izquierda -->
    <div class="col-sm-5"> 
      <div class="card border mt-3">
        <div class="card-header">
          <h4><i class="fa fa-money"></i> Elige Monto</h4>
        </div>
        <div class="card-body">
          <strong>
            <div class="row mb-3">
              <label class="col-md-3 col-form-label">Valor Viaje</label>
              <div class="col-md-4">
                <input type="text" class="form-control text-end" name="valorv" id="valorv" value="{{ form_view.valorv }}">
              </div>
            </div>

            <div class="row mb-3">
              <label class="col-md-3 col-form-label">Saldo Pendiente</label>
              <div class="col-md-4">
                <input type="text" class="form-control text-end" id="saldopen" name="saldopen" value="{{ form_view.saldopen }}>">
              </div>
            </div>

            <div class="row mb-3">
              <label class="col-md-3 col-form-label">Pago Total</label>
              <div class="col-md-4">
                <input type="text" class="form-control text-end" id="apagar" name="apagar" value="{{ form_view.apagar }}">
              </div>
            </div>

            <div class="row mb-3">
              <label class="col-md-3 col-form-label">Otro Valor</label>
              <div class="col-md-4">
                <input type="text" class="form-control text-end" id="mpagar" name="mpagar" maxlength="10" autofocus autocomplete="off">
              </div>
            </div>
          </strong>

          <div class="row mt-4">
            <div class="col-md-7 text-center">
              <button type="button" 
                      class="btn btn-primary btn-sm show-compact-entry" 
                      id="{{ session['id'] }}">
                Ver Abonos
              </button>
              <a href="/{{ empresa }}/manager/payment/index" 
                 class="btn btn-secondary btn-sm">
                <i class="fa fa-angle-double-left"></i> Cancelar y Volver
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Columna derecha -->
    <div class="col-sm-7">
      <div class="mt-3">
        <h4><i class="fa fa-credit-card"></i> Elige Forma Pago</h4> 
      </div>
      <div class="row mt-3">
        <!-- agregar formas de pago segun gateways --->            
        {% for gtw in form_view.gatewaysc %}
            {% if gtw.existe == 'S' %}
          <div class="col-sm-6 mb-3">
            <button type="submit" class="btn p-0 border-0 bg-transparent" id="{{ gtw['image'] }}">
              <img src="{{ gtw['image'] }}" class="img-fluid" alt="Pagos">
            </button>
          </div>
             {% endif %} 
        {% endfor %}
        <!---- fin formas de pago --->
      </div>
    </div>
  </form>
</div>

<!-- Modal -->
<div class="modal fade" id="modal-compact-view" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <div class="modal-header">
        <h4 class="modal-title">Detalle de Pagos</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>

      <div class="modal-body"></div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/pay/formpayment.js"></script>
{% endblock %}