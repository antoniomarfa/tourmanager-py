<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Tourmanager{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <link rel="stylesheet" href="/static/select2/dist/css/select2.min.css">
    <link rel="stylesheet" href="/static/signature/css/jquery.signature.css">
    <link rel="stylesheet" href="/static/css/input_text.css">  
    <link rel="stylesheet" href="/static/css/payment-style.css">
    <link rel="stylesheet" href="/static/css/strap.css"> 

    <style>
  /* fijar el menu nav bar */
  .navbar {
    position: sticky;
    top: 0;
    background: #333;
    color: white;
    padding: 10px 20px;
    z-index: 1000;
  }
</style>
  {% block head %}{% endblock %}    
</head>
<body>
   {% if request.session["position"] != "General" and request.session["position"] != "Apoderado" %} 
    <!-- Menú horizontal de navegación -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow">
    <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center" href="#">
        {{ request.session["company_name"] }}
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
        <!-- Menú principal (izquierda) -->
        <ul class="navbar-nav">
            <!-- Home -->
            <li class="nav-item">
            <a class="nav-link" href="#">Home</a>
            </li>

            <!-- Dashboard -->
            {% if request.session["permisos"]["dashboard"] %}
            <li class="nav-item">
            <a class="nav-link" href="#">Dashboard</a>
            </li>
            {% endif %}

            {% if request.session["permisos"]["company"] or request.session["permisos"]["programas"] or request.session["permisos"]["roles"] or request.session["permisos"]["school"] or request.session["permisos"]["users"] %}
            <!-- Configuración Base -->
            <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="configDropdown" role="button" data-bs-toggle="dropdown">
                Configuración Base
            </a>
            <ul class="dropdown-menu">
            {% if request.session["permisos"]["company"] %}
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/company/edit">Company</a></li>
            {% endif %}
            {% if request.session["permisos"]["programas"] %}
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/programs">Programas</a></li>
            {% endif %}
            {% if request.session["permisos"]["roles"] %}
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/roles">Roles</a></li>
            {% endif %}
            {% if request.session["permisos"]["school"] %}
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/schools">Colegios</a></li>
            {% endif %}
            {% if request.session["permisos"]["users"] %}
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/users">Usuarios</a></li>
            {% endif %}
            </ul>
            </li>
            {% endif %}

            {% if request.session["permisos"]["gateways"] or request.session["permisos"]["gatewaysconfig"] %}
            <!-- Integraciones -->
            <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="integracionesDropdown" role="button" data-bs-toggle="dropdown">
                Integraciones
            </a>
            <ul class="dropdown-menu">
                {% if request.session["permisos"]["gatewaysconfig"] %}
                <li><a class="dropdown-item" href="#">Configuración Pasarelas de Pago</a></li>
                {% endif %}
                {% if request.session["permisos"]["gateways"] %}
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/gateways">Pasarelas de Pago</a></li>
                {% endif %}
            </ul>
            </li>
            {% endif %}

            {% if request.session["permisos"]["gdsair"] or request.session["permisos"]["gdshotel"] %}
            <!-- GDS -->
            <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="gdsDropdown" role="button" data-bs-toggle="dropdown">
                GDS Amadeus
            </a>
            <ul class="dropdown-menu">
                {% if request.session["permisos"]["gdsair"] %}
                <li><a class="dropdown-item" href="#">Ticket Aéreos</a></li>
                {% endif %}
                {% if request.session["permisos"]["gdshotel"] %}
                <li><a class="dropdown-item" href="#">Hoteles</a></li>
                {% endif %}
            </ul>
            </li>
            {% endif %}

            {% if request.session["permisos"]["course"] or request.session["permisos"]["quotes"] or request.session["permisos"]["sales"] or request.session["permisos"]["salesreport"] or request.session["permisos"]["voucher"] %} 
            <!-- Ventas -->
            <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="ventasDropdown" role="button" data-bs-toggle="dropdown">
                Ventas
            </a>
            <ul class="dropdown-menu">
                {% if request.session["permisos"]["quotes"] %} 
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/quotes">Cotización Programas</a></li>
                {% endif %}
                {% if request.session["permisos"]["sales"] %} 
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/sales">Venta Programas</a></li>
                {% endif %}
                {% if request.session["permisos"]["course"] %} 
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/pasajeros">Pasajeros</a></li>
                {% endif %}
                 {% if request.session["permisos"]["voucher"] %} 
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/voucher">Ingreso Voucher</a></li>
                {% endif %}
                {% if request.session["permisos"]["salesreport"] %} 
                <li><a class="dropdown-item" href="#">Comisiones Vendedor</a></li>
                {% endif %}
            </ul>
            </li>
            {% endif %}

            {% if request.session["permisos"]["entry"] or request.session["permisos"]["listpay"] %}
            <!-- Pagos -->
            <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="pagosDropdown" role="button" data-bs-toggle="dropdown">
                Pagos
            </a>
            <ul class="dropdown-menu">
                {% if request.session["permisos"]["entry"] %}
                <li><a class="dropdown-item" href="/{{ empresa }}/manager/entry">Ingresos</a></li>
                {% endif %}
                {% if request.session["permisos"]["listpay"] %}
                <li><a class="dropdown-item" href="#">Informe de Pagos</a></li>
                {% endif %}
            </ul>
            </li>
            {% endif %}
        </ul>
        </div>  
        <!-- Menú usuario (derecha) -->
        <ul class="navbar-nav ms-auto">
            <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown">
                Hola, {{ request.session.get('user_name', 'Invitado') }} / {{ request.session.get('rol', 'Invitado') }}
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                <li><a class="dropdown-item" href="/profile">Mi perfil</a></li>
                <li><a class="dropdown-item" href="/change-password">Cambiar contraseña</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item text-danger" href="/logout">Cerrar sesión</a></li>
            </ul>
            </li>
        </ul>  
    </div>
    </nav>
   {% endif %}

<div class="container-md">
    {% block content %}{% endblock %}
</div>

<footer class="container-md">
    <hr style="height: 3px;background-color: black;">
    <p>© 2025 Tourmanager</p>
</footer>
<!-- Scripts abajo -->
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script> 
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
<script src="https://cdn.datatables.net/v/bs5/jq-3.7.0/moment-2.29.4/dt-2.3.2/af-2.7.0/b-3.2.4/cr-2.1.1/cc-1.0.7/date-1.5.6/fc-5.0.4/fh-4.0.3/kt-2.12.1/r-3.0.5/rg-1.5.2/rr-1.5.0/sc-2.4.3/sp-2.3.4/sl-3.0.1/sr-1.4.1/datatables.min.js" integrity="sha384-iopdoTgNFT/kqYDuuhRdnerX3XuHGhSNnZLUK1uiNebl+taWOOqVP/11CKB5RLZS" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.es.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="/static/select2/dist/js/select2.min.js"></script>
<script src="/static/bootbox/bootbox.min.js"></script>
<script src="/static/bootbox/bootbox.locales.min.js"></script>
<script src="/static/signature/js/jquery.signature.js"></script>
<script src="/static/js/jquery.validate.min.js"></script>
<script src="/static/js/validate/additional-methods.min.js"></script>
<script src="/static/js/validate/localization/messages_es.js"></script>
<script src="/static/js/custom-extra.js"></script>
{% block scripts %}{% endblock %}
</body>
</html> 