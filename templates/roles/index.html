{% extends "base.html" %}

{% block title %}Lista de Usuarios{% endblock %}

{% block content %}


<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/{{ empresa }}/manager/index">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Roles</li>
  </ol>
</nav>

<nav class="breadcrumb-container" aria-label="breadcrumb">
  <ol class="breadcrumb mb-0">
    <li class="breadcrumb-item">
      <a href="/{{ empresa }}/manager/index">
        <i class="bi bi-house-door-fill me-1"></i> Home
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">
      <i class="bi bi-pencil-square me-1"></i> Roles
    </li>
  </ol>
</nav>
<div class="clearfix"></div>

<div class="container mt-5">
  <!-- Page Header -->
  <div class="page-header">
    <h2>
      <i class="fas fa-money-bill-wave"></i>
      Listado de Roles
    </h2>
    <p class="subtitle">Gesti√≥n y seguimiento de todos los roles registrados</p>

    <div class="form-group text-right">
      {% if cant_access["can_insert"] %}
      <a href="/{{ empresa }}/manager/roles/create" class="btn btn-success mb-3"><i class="fa fa-file-text"
          aria-hidden="true"></i> Nuevo</a>
      {% endif %}
    </div>
  </div>

  <table class="table table-bordered table-hover" id="rolesTable">
    <thead>
      <th>Perfil</th>
      <th>Estado</th>
      <th>Fecha Actualizacion</th>
      <th>Modificador</th>
      <th></th>
    </thead>
    <tbody>
      {% for rol in roles %}

      {% set class_status = "text-bg-success" if rol.active == 1 else "text-bg-secondary" %}
      {% set text_status = "Activo" if rol.active == 1 else "Inactivo" %}
      <tr>
        <td>{{ rol.description }}</td>
        <td width="7%" align="center"><a style="cursor: pointer;" class="change-status" id="{{ rol.id }}"><span
              class="badge {{ class_status }}">{{ text_status }}</span></a></td>
        <td width="15%">{{ helper.formatear(rol.UpdatedDate) }}</td>
        <td width="15%">{{ rol.author }}</td>
        <td width="10%">
          {% if cant_access["can_update"] %}
          <a href="/{{ empresa }}/manager/roles/edit/{{ rol.id }}" class="btn btn-sm btn-outline-warning"
            data-bs-toggle="tooltip" title="Editar"><i class="fa fa-edit"></i></a>
          {% endif %}
          {% if rol.description != 'Vendedor' and rol.description != "Administrador" %}
          {% if cant_access["can_delete"] %}
          <a href="#" class="btn btn-sm btn-outline-danger delete-register" title="eliminar"
            data-original-title="Eliminar" data-id="{{ rol.id }}" data-bs-toggle="tooltip" title="Eliminatr"><i
              class="fa fa-trash"></i></a>
          {% endif %}
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>


  <br />
  {% endblock %}

  {% block scripts %}
  <script src="/static/js/roles/index.js"></script>
  {% endblock %}