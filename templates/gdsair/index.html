{% extends "base.html" %}

{% block title %}Ticket Aereos{% endblock %}

{% block content %}

<style>
    .card {
        border: 1px solid #ccc;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        background-color: #f9f9f9;
    }

    #loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 2000;
        font-size: 18px;
    }
</style>

<nav class="breadcrumb-container" aria-label="breadcrumb">
    <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item">
            <a href="/{{ empresa }}/manager/index">
                <i class="bi bi-house-door-fill me-1"></i> Home
            </a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">
            <i class="bi bi-pencil-square me-1"></i> Consulta Vuelos
        </li>
    </ol>
</nav>
<div id="loading-overlay" class="d-none">
    <div class="spinner-border text-primary"></div>
    <p>Cargando resultados...</p>
    <span id="loading-icon" class="spinner-border spinner-border-sm ms-2 d-none" role="status"
        aria-hidden="true"></span>
</div>
<br><br>

<!-- Page Header -->
<div class="page-header">
    <h2>
        <i class="fas fa-plane"></i>
        Consultar Vuelos
    </h2>
    <p class="subtitle"></p>
</div>

<div class="clearfix"></div>

<form role="form" id="form_air" enctype="multipart/form-data">

    <div class="card shadow-sm mb-4">
        <div class="card-header bg-light fw-semibold">
            Filtros de b√∫squeda
        </div>
        <div class="card-body">

            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label class="control-label">Ciudad Origen</label>
                        <select class="form-control required box_select" name="origin" id="origin">
                            <option value="">Seleccionar</option>
                            {% for country in countrys %}
                            {% set activo = "selected='selected'" if country.code == "CL" else "" %}
                            <option value="{{ country.code }}" {{ activo }}>{{ country.country }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label class="control-label">Ciudad Destino</label>
                        <select class="form-control required box_select" name="destination" id="destination">
                            <option value="">Seleccionar</option>
                            {% for country in countrys %}
                            <option value="{{ country.code }}">{{ country.country }}</option>
                            {% endfor%}
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label">Aeropuerto Origen</label>
                        <select class="form-control required box_select" name="origincode" id="origincode">
                            <option value="">Seleccionar</option>
                            {% for airport in airports %}
                            {% set activo = "selected='selected'" if airport.iata == "SCL" else "" %}
                            <option value="{{ airport.iata }}" {{ activo }}>{{ airport.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-2">
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label">Aeropuerto Destino</label>
                        <select class="form-control required box_select" name="destinationcode" id="destinationcode">
                            <option value="">Seleccionar</option>
                            {% for airport in airports %}
                            <option value="{{ airport.iata }}">{{ airport.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <span class="control-label">&nbsp;&nbsp;Fecha Desde</span><br>
                    <div class="col-md-6 no-padding">
                        <div>
                            <input type="date" id="start_date" name="start_date" value="{{ start_date }}" />
                        </div>
                    </div>
                </div>
                <div class="col-md-2">
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label">Cantidad de Ofertas</label>
                        <select class="form-control required box_select" name="cnt_offers" id="cnt_offers">
                            <option value="">Seleccionar</option>
                            {% for i in range(1, 6) %}
                            <option value="{{ i }}">{{ i }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-12 text-end">
                        <button id="execute_search" class="btn btn-primary"><i class="fa fa-search"></i> Buscar</button>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="col-md-12" id="result">
        </div>

        {% endblock %}

        {% block scripts %}
        <script src="/static/js/gdsair/index.js"></script>
        {% endblock %}